<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-12">
      <h2 class="text-center mb-4 text">Carrello</h2>
      <ul class="list-group">
        <li *ngFor="let item of cart?.cartItems" class="list-group-item d-flex flex-column flex-md-row justify-content-between align-items-center shadow-sm p-3 mb-3 bg-body rounded">
          <div class="d-flex align-items-center flex-column flex-md-row text-center text-md-start">
            <img
              [src]="getCoverImagePath(item.coverImagePath)"
              (error)="handleImageError($event)"
              alt="Cover image of {{ item.bookName }}"
              class="img-thumbnail mb-3 mb-md-0 me-md-3"
              style="width: 100px; height: auto;"

            />
            <div class="text">
              <h3 class="mb-1">{{ item.bookName }}</h3>
              <p class="mb-0 fs-7"><strong class="fs-5">Prezzo:</strong> {{ item.pricePerUnit | currency:'EUR':'symbol' }}</p>
            </div>
          </div>
          <button type="button" class="buttonAdd mt-3 mt-md-0" (click)="deleteFromCart(item)">
            <span class="button__text">Elimina</span>
            <span class="button__icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg">
                <path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path>
              </svg>
            </span>
          </button>
        </li>
      </ul>
      <div class="cart-total my-4 text-center">
        <h3>Totale Carrello: {{ cart?.cartTotal | currency:'EUR':'symbol' }}</h3>
        <button type="button" (click)="purchase()"class="buttonAdd m-auto mt-3">
          <span class="button__text">Completa Acquisto</span>
          <span class="button__icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16" style="color: white;">
              <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5M3.14 5l.5 2H5V5zM6 5v2h2V5zm3 0v2h2V5zm3 0v2h1.36l.5-2zm1.11 3H12v2h.61zM11 8H9v2h2zM8 8H6v2h2zM5 8H3.89l.5 2H5zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0m9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2m-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0"/>
            </svg>
          </span>
        </button>
      </div>

    </div>
  </div>
</div>

<ng-template #noCart>
  <div class="text-center mt-5">
    <p>Il carrello Ã¨ vuoto.</p>
  </div>
</ng-template>
