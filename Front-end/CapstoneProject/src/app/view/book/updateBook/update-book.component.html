<div class="container mt-5">
  <div class="card p-4 shadow-lg form-container">
    <h2 class="text-center mb-4 text">Aggiorna Libro</h2>

    <form (ngSubmit)="onSubmit()" #bookForm="ngForm">
      <div class="form-group mb-3">
        <label for="name" class="form-label fs-5">Nome del libro</label>
        <input type="text" id="name" class="form-control" [(ngModel)]="book.name" name="name" required placeholder="Inserisci il nome del libro">
      </div>

      <div class="form-group mb-3">
        <label for="authorId" class="form-label fs-5">Autore</label>
        <select id="authorId" class="form-control" [(ngModel)]="authorId" name="authorId" required>
          <option *ngFor="let author of authors" [value]="author.authorId" [selected]="isAuthorSelected(author.authorId)">
            {{ author.firstName }} {{ author.lastName }}
          </option>
        </select>
      </div>

      <div class="form-group mb-3">
        <label for="genres" class="form-label fs-5">Generi</label>
        <div class="row">
          <div class="col-6" *ngFor="let genre of genres">
            <div class="form-check custom-checkbox">
              <input class="form-check-input" type="checkbox" [value]="genre.genreId" (change)="onGenreChange($event, genre.genreId)" [checked]="isGenreSelected(genre.genreId)">
              <label class="form-check-label">
                {{ genre.genreName }}
              </label>
            </div>
          </div>
        </div>
      </div>

      <div class="form-group mb-3">
        <label for="numberOfPages" class="form-label fs-5">Numero di Pagine</label>
        <input type="number" id="numberOfPages" class="form-control" [(ngModel)]="book.numberOfPages" name="numberOfPages" required placeholder="Inserisci il numero di pagine">
      </div>

      <div class="form-group mb-3">
        <label for="publicationDate" class="form-label fs-5">Data di Pubblicazione</label>
        <input
          type="date"
          id="publicationDate"
          class="form-control"
          [(ngModel)]="formattedPublicationDate"
          name="publicationDate"
          required>
      </div>

      <div class="form-group mb-3">
        <label for="price" class="form-label fs-5">Prezzo</label>
        <input type="text" id="price" class="form-control" [(ngModel)]="book.price" name="price" required placeholder="Inserisci il prezzo">
      </div>

      <div class="form-group mb-3">
        <label for="availableQuantity" class="form-label fs-5">Quantità Disponibile</label>
        <input type="number" id="availableQuantity" class="form-control" [(ngModel)]="book.availableQuantity" name="availableQuantity" required placeholder="Inserisci la quantità disponibile">
      </div>

      <div class="form-group mb-3">
        <label for="coverImage" class="form-label fs-5">Immagine di copertina</label>
        <input type="file" id="coverImage" (change)="onFileSelected($event)" class="form-control">
        <img *ngIf="book.coverImagePath" [src]="getCoverImagePath(book.coverImagePath)" alt="Cover image" class="img-thumbnail mt-2 p" style="width: 150px;">
      </div>

      <div class="form-group mb-3">
        <label for="description" class="form-label fs-5">Descrizione</label>
        <textarea id="description" class="form-control" [(ngModel)]="book.description" name="description" placeholder="Inserisci una descrizione"></textarea>
      </div>

      <div class="text-center">
        <button type="submit" class="buttonAdd m-auto">
          <span class="button__text">Aggiorna Libro</span>
          <span class="button__icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg">
              <line y2="19" y1="5" x2="12" x1="12"></line>
              <line y2="12" y1="12" x2="19" x1="5"></line>
            </svg>
          </span>
        </button>
      </div>
    </form>
  </div>
</div>
